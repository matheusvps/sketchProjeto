{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport { testPattern } from '../utils/patterns.js';\nvar lazyRulesValues = [true, false, 'ondemand'];\nexport default {\n  props: {\n    value: {},\n    error: {\n      type: Boolean,\n      \"default\": null\n    },\n    errorMessage: String,\n    noErrorIcon: Boolean,\n    rules: Array,\n    reactiveRules: Boolean,\n    lazyRules: {\n      type: [Boolean, String],\n      validator: function validator(v) {\n        return lazyRulesValues.includes(v);\n      }\n    }\n  },\n  data: function data() {\n    return {\n      isDirty: null,\n      innerError: false,\n      innerErrorMessage: void 0\n    };\n  },\n  watch: {\n    value: function value() {\n      this.__validateIfNeeded();\n    },\n    reactiveRules: {\n      handler: function handler(val) {\n        var _this = this;\n        if (val === true) {\n          if (this.unwatchRules === void 0) {\n            this.unwatchRules = this.$watch('rules', function () {\n              _this.__validateIfNeeded(true);\n            });\n          }\n        } else if (this.unwatchRules !== void 0) {\n          this.unwatchRules();\n          this.unwatchRules = void 0;\n        }\n      },\n      immediate: true\n    },\n    focused: function focused(_focused) {\n      if (this.lazyRules !== 'ondemand') {\n        if (_focused === true) {\n          if (this.isDirty === null) {\n            this.isDirty = false;\n          }\n        } else if (this.isDirty === false && this.hasRules === true) {\n          this.isDirty = true;\n          this.validate();\n        }\n      }\n    }\n  },\n  computed: {\n    hasRules: function hasRules() {\n      return this.rules !== void 0 && this.rules !== null && this.rules.length > 0;\n    },\n    hasError: function hasError() {\n      return this.error === true || this.innerError === true;\n    },\n    computedErrorMessage: function computedErrorMessage() {\n      return typeof this.errorMessage === 'string' && this.errorMessage.length > 0 ? this.errorMessage : this.innerErrorMessage;\n    }\n  },\n  mounted: function mounted() {\n    this.validateIndex = 0;\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.unwatchRules !== void 0 && this.unwatchRules();\n  },\n  methods: {\n    resetValidation: function resetValidation() {\n      this.validateIndex++;\n      this.innerLoading = false;\n      this.isDirty = null;\n      this.innerError = false;\n      this.innerErrorMessage = void 0;\n    },\n    /*\n     * Return value\n     *   - true (validation succeeded)\n     *   - false (validation failed)\n     *   - Promise (pending async validation)\n     */\n    validate: function validate() {\n      var _this2 = this;\n      var val = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.value;\n      if (this.hasRules !== true) {\n        return true;\n      }\n      this.validateIndex++;\n      if (this.innerLoading !== true && this.lazyRules !== true) {\n        this.isDirty = true;\n      }\n      var update = function update(err, msg) {\n        if (_this2.innerError !== err) {\n          _this2.innerError = err;\n        }\n        var m = msg || void 0;\n        if (_this2.innerErrorMessage !== m) {\n          _this2.innerErrorMessage = m;\n        }\n        if (_this2.innerLoading !== false) {\n          _this2.innerLoading = false;\n        }\n      };\n      var promises = [];\n      for (var i = 0; i < this.rules.length; i++) {\n        var rule = this.rules[i];\n        var res = void 0;\n        if (typeof rule === 'function') {\n          res = rule(val);\n        } else if (typeof rule === 'string' && testPattern[rule] !== void 0) {\n          res = testPattern[rule](val);\n        }\n        if (res === false || typeof res === 'string') {\n          update(true, res);\n          return false;\n        } else if (res !== true && res !== void 0) {\n          promises.push(res);\n        }\n      }\n      if (promises.length === 0) {\n        update(false);\n        return true;\n      }\n      if (this.innerLoading !== true) {\n        this.innerLoading = true;\n      }\n      var index = this.validateIndex;\n      return Promise.all(promises).then(function (res) {\n        if (index !== _this2.validateIndex) {\n          return true;\n        }\n        if (res === void 0 || Array.isArray(res) === false || res.length === 0) {\n          update(false);\n          return true;\n        }\n        var msg = res.find(function (r) {\n          return r === false || typeof r === 'string';\n        });\n        update(msg !== void 0, msg);\n        return msg === void 0;\n      }, function (e) {\n        if (index === _this2.validateIndex) {\n          console.error(e);\n          update(true);\n          return false;\n        }\n        return true;\n      });\n    },\n    __validateIfNeeded: function __validateIfNeeded(changedRules) {\n      if (this.hasRules === true && this.lazyRules !== 'ondemand' && (this.isDirty === true || this.lazyRules !== true && changedRules !== true)) {\n        this.validate();\n      }\n    }\n  }\n};","map":{"version":3,"names":["testPattern","lazyRulesValues","props","value","error","type","Boolean","errorMessage","String","noErrorIcon","rules","Array","reactiveRules","lazyRules","validator","v","includes","data","isDirty","innerError","innerErrorMessage","watch","__validateIfNeeded","handler","val","_this","unwatchRules","$watch","immediate","focused","hasRules","validate","computed","length","hasError","computedErrorMessage","mounted","validateIndex","beforeDestroy","methods","resetValidation","innerLoading","_this2","arguments","undefined","update","err","msg","m","promises","i","rule","res","push","index","Promise","all","then","isArray","find","r","e","console","changedRules"],"sources":["C:/Users/rodri/projetos/sketchProjeto/view/node_modules/quasar/src/mixins/validate.js"],"sourcesContent":["import { testPattern } from '../utils/patterns.js'\n\nconst lazyRulesValues = [ true, false, 'ondemand' ]\n\nexport default {\n  props: {\n    value: {},\n\n    error: {\n      type: Boolean,\n      default: null\n    },\n    errorMessage: String,\n    noErrorIcon: Boolean,\n\n    rules: Array,\n    reactiveRules: Boolean,\n    lazyRules: {\n      type: [ Boolean, String ],\n      validator: v => lazyRulesValues.includes(v)\n    }\n  },\n\n  data () {\n    return {\n      isDirty: null,\n      innerError: false,\n      innerErrorMessage: void 0\n    }\n  },\n\n  watch: {\n    value () {\n      this.__validateIfNeeded()\n    },\n\n    reactiveRules: {\n      handler (val) {\n        if (val === true) {\n          if (this.unwatchRules === void 0) {\n            this.unwatchRules = this.$watch('rules', () => {\n              this.__validateIfNeeded(true)\n            })\n          }\n        }\n        else if (this.unwatchRules !== void 0) {\n          this.unwatchRules()\n          this.unwatchRules = void 0\n        }\n      },\n      immediate: true\n    },\n\n    focused (focused) {\n      if (this.lazyRules !== 'ondemand') {\n        if (focused === true) {\n          if (this.isDirty === null) {\n            this.isDirty = false\n          }\n        }\n        else if (this.isDirty === false && this.hasRules === true) {\n          this.isDirty = true\n          this.validate()\n        }\n      }\n    }\n  },\n\n  computed: {\n    hasRules () {\n      return this.rules !== void 0 &&\n        this.rules !== null &&\n        this.rules.length > 0\n    },\n\n    hasError () {\n      return this.error === true || this.innerError === true\n    },\n\n    computedErrorMessage () {\n      return typeof this.errorMessage === 'string' && this.errorMessage.length > 0\n        ? this.errorMessage\n        : this.innerErrorMessage\n    }\n  },\n\n  mounted () {\n    this.validateIndex = 0\n  },\n\n  beforeDestroy () {\n    this.unwatchRules !== void 0 && this.unwatchRules()\n  },\n\n  methods: {\n    resetValidation () {\n      this.validateIndex++\n      this.innerLoading = false\n      this.isDirty = null\n      this.innerError = false\n      this.innerErrorMessage = void 0\n    },\n\n    /*\n     * Return value\n     *   - true (validation succeeded)\n     *   - false (validation failed)\n     *   - Promise (pending async validation)\n     */\n    validate (val = this.value) {\n      if (this.hasRules !== true) {\n        return true\n      }\n\n      this.validateIndex++\n\n      if (this.innerLoading !== true && this.lazyRules !== true) {\n        this.isDirty = true\n      }\n\n      const update = (err, msg) => {\n        if (this.innerError !== err) {\n          this.innerError = err\n        }\n\n        const m = msg || void 0\n\n        if (this.innerErrorMessage !== m) {\n          this.innerErrorMessage = m\n        }\n\n        if (this.innerLoading !== false) {\n          this.innerLoading = false\n        }\n      }\n\n      const promises = []\n\n      for (let i = 0; i < this.rules.length; i++) {\n        const rule = this.rules[i]\n        let res\n\n        if (typeof rule === 'function') {\n          res = rule(val)\n        }\n        else if (typeof rule === 'string' && testPattern[rule] !== void 0) {\n          res = testPattern[rule](val)\n        }\n\n        if (res === false || typeof res === 'string') {\n          update(true, res)\n          return false\n        }\n        else if (res !== true && res !== void 0) {\n          promises.push(res)\n        }\n      }\n\n      if (promises.length === 0) {\n        update(false)\n        return true\n      }\n\n      if (this.innerLoading !== true) {\n        this.innerLoading = true\n      }\n\n      const index = this.validateIndex\n\n      return Promise.all(promises).then(\n        res => {\n          if (index !== this.validateIndex) {\n            return true\n          }\n\n          if (res === void 0 || Array.isArray(res) === false || res.length === 0) {\n            update(false)\n            return true\n          }\n\n          const msg = res.find(r => r === false || typeof r === 'string')\n          update(msg !== void 0, msg)\n          return msg === void 0\n        },\n        e => {\n          if (index === this.validateIndex) {\n            console.error(e)\n            update(true)\n            return false\n          }\n\n          return true\n        }\n      )\n    },\n\n    __validateIfNeeded (changedRules) {\n      if (\n        this.hasRules === true &&\n        this.lazyRules !== 'ondemand' &&\n        (this.isDirty === true || (this.lazyRules !== true && changedRules !== true))\n      ) {\n        this.validate()\n      }\n    }\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}